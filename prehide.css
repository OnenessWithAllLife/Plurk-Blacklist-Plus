/* 初始化階段先隱藏可能的噗文容器，避免「先看到再隱藏」的閃爍 */
html.pbe-prehide [data-plurk-id],
html.pbe-prehide .plurk,
html.pbe-prehide .plurk_item,
html.pbe-prehide article {
  visibility: hidden !important;
}

/* 額外覆蓋整頁，使用 overlay 擋住初次繪製並避免操作 */
html.pbe-prehide {
  background: #ffffff !important;
}
html.pbe-prehide body {
  overflow: hidden !important;
}
#pbe-overlay {
  position: fixed;
  inset: 0;
  z-index: 2147483647; /* 最高層級，避免被網站元素蓋過 */
  display: none;
  background: #ffffff;
  color: #666666;
  align-items: center;
  justify-content: center;
  gap: 12px;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans", "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji";
  font-size: 14px;
}
html.pbe-prehide #pbe-overlay {
  display: flex;
}

/* Spinner 動畫定義 */
@keyframes pbe-spin {
  to { transform: rotate(360deg); }
}

/* Spinner 基礎樣式 */
.pbe-spinner {
  border: 3px solid #e5e5e5;
  border-top-color: #888888;
  border-radius: 50%;
  animation: pbe-spin 0.8s linear infinite;
}

/* Overlay 中的 spinner（較大） */
#pbe-overlay .pbe-spinner {
  width: 28px;
  height: 28px;
}

/* 預設：只隱藏留言區塊，不影響主噗文（CSS 優先，在渲染前就生效） */
div[id^="plurk_cnt_"] .response,
div[id^="plurk_cnt_"] [data-rid],
div[id^="plurk_cnt_"] .response_item,
div[id^="plurk_cnt_"] .response_list {
  visibility: hidden !important;
}

/* 確保留言串容器有相對定位（用於 overlay） */
div[id^="plurk_cnt_"] {
  position: relative !important;
}

/* 過濾後顯示留言（黑名單留言仍被 .pbe-hidden 隱藏） */
div[id^="plurk_cnt_"][data-pbe-filtered="1"] .response:not(.pbe-hidden),
div[id^="plurk_cnt_"][data-pbe-filtered="1"] [data-rid]:not(.pbe-hidden),
div[id^="plurk_cnt_"][data-pbe-filtered="1"] .response_item:not(.pbe-hidden),
div[id^="plurk_cnt_"][data-pbe-filtered="1"] .response_list:not(.pbe-hidden) {
  visibility: visible !important;
}

/* 在已過濾的容器內，隱藏黑名單留言 */
div[id^="plurk_cnt_"][data-pbe-filtered="1"] .pbe-hidden {
  display: none !important;
}

/* 留言串內的 overlay（僅顯示在該容器內） */
.pbe-thread-overlay {
  position: absolute;
  inset: 0;
  z-index: 2147483000;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.95);
  pointer-events: none;
}

/* Thread overlay 中的 spinner（較小） */
.pbe-thread-overlay .pbe-spinner {
  width: 22px;
  height: 22px;
}

